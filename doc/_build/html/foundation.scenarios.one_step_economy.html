<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>foundation.scenarios.one_step_economy package &mdash; ai-economist foundation  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="foundation.scenarios.simple_wood_and_stone package" href="foundation.scenarios.simple_wood_and_stone.html" />
    <link rel="prev" title="foundation.scenarios.covid19 package" href="foundation.scenarios.covid19.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ai-economist foundation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">foundation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="foundation.html">foundation package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="foundation.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="foundation.agents.html">foundation.agents package</a></li>
<li class="toctree-l4"><a class="reference internal" href="foundation.base.html">foundation.base package</a></li>
<li class="toctree-l4"><a class="reference internal" href="foundation.components.html">foundation.components package</a></li>
<li class="toctree-l4"><a class="reference internal" href="foundation.entities.html">foundation.entities package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="foundation.scenarios.html">foundation.scenarios package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#module-foundation.env_wrapper">foundation.env_wrapper module</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#module-foundation.utils">foundation.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#module-foundation">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ai-economist foundation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">foundation</a> &raquo;</li>
          <li><a href="foundation.html">foundation package</a> &raquo;</li>
          <li><a href="foundation.scenarios.html">foundation.scenarios package</a> &raquo;</li>
      <li>foundation.scenarios.one_step_economy package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/foundation.scenarios.one_step_economy.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="foundation-scenarios-one-step-economy-package">
<h1>foundation.scenarios.one_step_economy package<a class="headerlink" href="#foundation-scenarios-one-step-economy-package" title="Permalink to this headline"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-foundation.scenarios.one_step_economy.one_step_economy">
<span id="foundation-scenarios-one-step-economy-one-step-economy-module"></span><h2>foundation.scenarios.one_step_economy.one_step_economy module<a class="headerlink" href="#module-foundation.scenarios.one_step_economy.one_step_economy" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.scenarios.one_step_economy.one_step_economy.</span></span><span class="sig-name descname"><span class="pre">OneStepEconomy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_env_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent_reward_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'coin_minus_labor_cost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isoelastic_eta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.23</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labor_exponent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labor_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">planner_reward_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inv_income_weighted_utility'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mixing_weight_gini_vs_coin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_env_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_env.BaseEnvironment</span></code></p>
<p>A simple model featuring one “step” of setting taxes and earning income.</p>
<dl class="simple">
<dt>As described in <a class="reference external" href="https://arxiv.org/abs/2108.02755">https://arxiv.org/abs/2108.02755</a>:</dt><dd><p>A simplified version of simple_wood_and_stone scenario where both the planner
and the agents each make a single decision: the planner setting taxes and the
agents choosing labor. Each agent chooses an amount of labor that optimizes
its post-tax utility, and this optimal labor depends on its skill and the tax
rates, and it does not depend on the labor choices of other agents. Before
the agents act, the planner sets the marginal tax rates in order to optimize
social welfare.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>This scenario is intended to be used with the ‘PeriodicBracketTax’ and</dt><dd><p>‘SimpleLabor’ components.</p>
</dd>
<dt>It should use an episode length of 2. In the first step, taxes are set by</dt><dd><p>the planner via ‘PeriodicBracketTax’. In the second, agents select how much
to work/earn via ‘SimpleLabor’.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_reward_type</strong> (<em>str</em>) – The type of utility function used to compute each
agent’s reward. Defaults to “coin_minus_labor_cost”.</p></li>
<li><p><strong>isoelastic_eta</strong> (<em>float</em>) – The shape parameter of the isoelastic function used
in the “isoelastic_coin_minus_labor” utility function.</p></li>
<li><p><strong>labor_exponent</strong> (<em>float</em>) – The labor exponent parameter used in the
“coin_minus_labor_cost” utility function.</p></li>
<li><p><strong>labor_cost</strong> (<em>float</em>) – The coefficient used to weight the cost of labor.</p></li>
<li><p><strong>planner_reward_type</strong> (<em>str</em>) – The type of social welfare function (SWF) used to
compute the planner’s reward. Defaults to “inv_income_weighted_utility”.</p></li>
<li><p><strong>mixing_weight_gini_vs_coin</strong> (<em>float</em>) – Must be between 0 and 1 (inclusive).
Controls the weighting of equality and productivity when using SWF
“coin_eq_times_productivity”, where a value of 0 (default) yields equal
weighting, and 1 only considers productivity.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>Extra scenario-specific steps that should be performed at the end of the reset
cycle.</p>
<dl>
<dt>For each reset cycle…</dt><dd><p>First, reset_starting_layout() and reset_agent_states() will be called.</p>
<p>Second, &lt;component&gt;.reset() will be called for each registered component.</p>
<p>Lastly, this method will be called to allow for any final customization of
the reset cycle.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent',</span> <span class="pre">'BasicPlanner']</span></em><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.compute_reward">
<span class="sig-name descname"><span class="pre">compute_reward</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.compute_reward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.compute_reward" title="Permalink to this definition"></a></dt>
<dd><p>Apply the reward function(s) associated with this scenario to get the rewards
from this step.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {agent.idx: agent_obs_dict}. In words,</dt><dd><p>return a dictionary with an entry for each agent in the environment
(including the planner). For each entry, the key specifies the index of
the agent and the value contains the scalar reward earned this timestep.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>rew (dict)</p>
</dd>
</dl>
<p>Rewards are computed as the marginal utility (agents) or marginal social
welfare (planner) experienced on this timestep. Ignoring discounting,
this means that agents’ (planner’s) objective is to maximize the utility
(social welfare) associated with the terminal state of the episode.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>Generate observations associated with this scenario.</p>
<p>A scenario does not need to produce observations and can provide observations
for only some agent types; however, for a given agent type, it should either
always or never yield an observation. If it does yield an observation,
that observation should always have the same structure/sizes!</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {agent.idx: agent_obs_dict}. In words,</dt><dd><p>return a dictionary with an entry for each agent (which can including
the planner) for which this scenario provides an observation. For each
entry, the key specifies the index of the agent and the value contains
its associated observation dictionary.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>obs (dict)</p>
</dd>
</dl>
<p>Here, non-planner agents receive spatial observations (depending on the env
config) as well as the contents of their inventory and endogenous quantities.
The planner also receives spatial observations (again, depending on the env
config) as well as the inventory of each of the mobile agents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.get_current_optimization_metrics">
<span class="sig-name descname"><span class="pre">get_current_optimization_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isoelastic_eta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.23</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labor_exponent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labor_coefficient</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.get_current_optimization_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.get_current_optimization_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Compute optimization metrics based on the current state. Used to compute reward.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {agent.idx: metric}</dt><dd><p>with an entry for each agent (including the planner) in the env.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>curr_optimization_metric (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'one-step-economy'</span></em><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Coin']</span></em><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.reset_agent_states">
<span class="sig-name descname"><span class="pre">reset_agent_states</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.reset_agent_states"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.reset_agent_states" title="Permalink to this definition"></a></dt>
<dd><p>Part 2/2 of scenario reset. This method handles resetting the state of the
agents themselves (i.e. inventory, locations, etc.).</p>
<p>Here, empty inventories, give mobile agents any starting coin, and place them
in random accesible locations to start.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.reset_starting_layout">
<span class="sig-name descname"><span class="pre">reset_starting_layout</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.reset_starting_layout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.reset_starting_layout" title="Permalink to this definition"></a></dt>
<dd><p>Part 1/2 of scenario reset. This method handles resetting the state of the
environment managed by the scenario (i.e. resource &amp; landmark layout).</p>
<p>Here, generate a resource source layout consistent with target parameters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.scenario_metrics">
<span class="sig-name descname"><span class="pre">scenario_metrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.scenario_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.scenario_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Allows the scenario to generate metrics (collected along with component metrics
in the ‘metrics’ property).</p>
<p>To have the scenario add metrics, this function needs to return a dictionary of
{metric_key: value} where ‘value’ is a scalar (no nesting or lists!)</p>
<p>Here, summarize social metrics, endowments, utilities, and labor cost annealing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.scenario_step">
<span class="sig-name descname"><span class="pre">scenario_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/scenarios/one_step_economy/one_step_economy.html#OneStepEconomy.scenario_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.scenarios.one_step_economy.one_step_economy.OneStepEconomy.scenario_step" title="Permalink to this definition"></a></dt>
<dd><p>Update the state of the world according to whatever rules this scenario
implements.</p>
<p>This gets called in the ‘step’ method (of base_env) after going through each
component step and before generating observations, rewards, etc.</p>
<p>NOTE: does not take agent actions into account.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-foundation.scenarios.one_step_economy">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-foundation.scenarios.one_step_economy" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="foundation.scenarios.covid19.html" class="btn btn-neutral float-left" title="foundation.scenarios.covid19 package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="foundation.scenarios.simple_wood_and_stone.html" class="btn btn-neutral float-right" title="foundation.scenarios.simple_wood_and_stone package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, a.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>