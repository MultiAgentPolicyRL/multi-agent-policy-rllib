<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>foundation.components package &mdash; ai-economist foundation  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="foundation.entities package" href="foundation.entities.html" />
    <link rel="prev" title="foundation.base package" href="foundation.base.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ai-economist foundation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">foundation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="foundation.html">foundation package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="foundation.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="foundation.agents.html">foundation.agents package</a></li>
<li class="toctree-l4"><a class="reference internal" href="foundation.base.html">foundation.base package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">foundation.components package</a></li>
<li class="toctree-l4"><a class="reference internal" href="foundation.entities.html">foundation.entities package</a></li>
<li class="toctree-l4"><a class="reference internal" href="foundation.scenarios.html">foundation.scenarios package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#module-foundation.env_wrapper">foundation.env_wrapper module</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#module-foundation.utils">foundation.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html#module-foundation">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ai-economist foundation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">foundation</a> &raquo;</li>
          <li><a href="foundation.html">foundation package</a> &raquo;</li>
      <li>foundation.components package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/foundation.components.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="foundation-components-package">
<h1>foundation.components package<a class="headerlink" href="#foundation-components-package" title="Permalink to this headline"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-foundation.components.build">
<span id="foundation-components-build-module"></span><h2>foundation.components.build module<a class="headerlink" href="#module-foundation.components.build" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.build.Build">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.build.</span></span><span class="sig-name descname"><span class="pre">Build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_component_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_max_skill_multiplier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skill_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_labor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_component_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Allows mobile agents to build house landmarks in the world using stone and wood,
earning income.</p>
<p>Can be configured to include heterogeneous building skill where agents earn
different levels of income when building.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>payment</strong> (<em>int</em>) – Default amount of coin agents earn from building.
Must be &gt;= 0. Default is 10.</p></li>
<li><p><strong>payment_max_skill_multiplier</strong> (<em>int</em>) – Maximum skill multiplier that an agent
can sample. Must be &gt;= 1. Default is 1.</p></li>
<li><p><strong>skill_dist</strong> (<em>str</em>) – Distribution type for sampling skills. Default (“none”)
gives all agents identical skill equal to a multiplier of 1. “pareto” and
“lognormal” sample skills from the associated distributions.</p></li>
<li><p><strong>build_labor</strong> (<em>float</em>) – Labor cost associated with building a house.
Must be &gt;= 0. Default is 10.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Re-sample agents’ building skills.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.agent_can_build">
<span class="sig-name descname"><span class="pre">agent_can_build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.agent_can_build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.agent_can_build" title="Permalink to this definition"></a></dt>
<dd><p>Return True if agent can actually build in its current location.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.build.Build.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent']</span></em><a class="headerlink" href="#foundation.components.build.Build.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.component_step" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Convert stone+wood to house+coin for agents that choose to build and can.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.build.Build.component_type">
<span class="sig-name descname"><span class="pre">component_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Build'</span></em><a class="headerlink" href="#foundation.components.build.Build.component_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Prevent building only if a landmark already occupies the agent’s location.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Here, agents observe their build skill. The planner does not observe anything
from this component.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>For mobile agents, add state fields for building skill.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.get_dense_log">
<span class="sig-name descname"><span class="pre">get_dense_log</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.get_dense_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.get_dense_log" title="Permalink to this definition"></a></dt>
<dd><p>Log builds.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A list of build events. Each entry corresponds to a single</dt><dd><p>timestep and contains a description of any builds that occurred on
that timestep.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>builds (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.get_metrics">
<span class="sig-name descname"><span class="pre">get_metrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.get_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.get_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Metrics that capture what happened through this component.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {“metric_name”: metric_value},</dt><dd><p>where metric_value is a scalar.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>metrics (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.build.Build.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/build.html#Build.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.build.Build.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Add a single action (build) for mobile agents.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.build.Build.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Build'</span></em><a class="headerlink" href="#foundation.components.build.Build.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.build.Build.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Wood',</span> <span class="pre">'Stone',</span> <span class="pre">'Coin',</span> <span class="pre">'House',</span> <span class="pre">'Labor']</span></em><a class="headerlink" href="#foundation.components.build.Build.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-foundation.components.continuous_double_auction">
<span id="foundation-components-continuous-double-auction-module"></span><h2>foundation.components.continuous_double_auction module<a class="headerlink" href="#module-foundation.components.continuous_double_auction" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.continuous_double_auction.</span></span><span class="sig-name descname"><span class="pre">ContinuousDoubleAuction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bid_ask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_labor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_num_orders</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Allows mobile agents to buy/sell collectible resources with one another.</p>
<dl class="simple">
<dt>Implements a commodity-exchange-style market where agents may sell a unit of</dt><dd><p>resource by submitting an ask (saying the minimum it will accept in payment)
or may buy a resource by submitting a bid (saying the maximum it will pay in
exchange for a unit of a given resource).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_bid_ask</strong> (<em>int</em>) – Maximum amount of coin that an agent can bid or ask for.
Must be &gt;= 1. Default is 10 coin.</p></li>
<li><p><strong>order_labor</strong> (<em>float</em>) – Amount of labor incurred when an agent creates an order.
Must be &gt;= 0. Default is 0.25.</p></li>
<li><p><strong>order_duration</strong> (<em>int</em>) – Number of environment timesteps before an unfilled
bid/ask expires. Must be &gt;= 1. Default is 50 timesteps.</p></li>
<li><p><strong>max_num_orders</strong> (<em>int</em><em>, </em><em>optional</em>) – Maximum number of bids + asks that an agent can
have open for a given resource. Must be &gt;= 1. Default is no limit to
number of orders.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Reset the order books.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent']</span></em><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.available_asks">
<span class="sig-name descname"><span class="pre">available_asks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.available_asks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.available_asks" title="Permalink to this definition"></a></dt>
<dd><p>Get a histogram of asks for resource to which agent could bid against.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>str</em>) – Name of the resource</p></li>
<li><p><strong>agent</strong> (<a class="reference internal" href="foundation.agents.html#foundation.agents.mobiles.BasicMobileAgent" title="foundation.agents.mobiles.BasicMobileAgent"><em>BasicMobileAgent</em></a><em> or </em><em>None</em>) – Object of agent for which available
asks are being queried. If None, all asks are considered available.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>For each possible price level, the number of</dt><dd><p>available asks.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ask_hist (ndarray)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.available_bids">
<span class="sig-name descname"><span class="pre">available_bids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.available_bids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.available_bids" title="Permalink to this definition"></a></dt>
<dd><p>Get a histogram of bids for resource to which agent could ask against.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>str</em>) – Name of the resource</p></li>
<li><p><strong>agent</strong> (<a class="reference internal" href="foundation.agents.html#foundation.agents.mobiles.BasicMobileAgent" title="foundation.agents.mobiles.BasicMobileAgent"><em>BasicMobileAgent</em></a><em> or </em><em>None</em>) – Object of agent for which available
bids are being queried. If None, all bids are considered available.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>For each possible price level, the number of</dt><dd><p>available bids.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bid_hist (ndarray)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.can_ask">
<span class="sig-name descname"><span class="pre">can_ask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.can_ask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.can_ask" title="Permalink to this definition"></a></dt>
<dd><p>If agent can submit an ask for resource.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.can_bid">
<span class="sig-name descname"><span class="pre">can_bid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.can_bid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.can_bid" title="Permalink to this definition"></a></dt>
<dd><p>If agent can submit a bid for resource.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.component_step" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Create new bids and asks, match and execute valid order pairs, and manage
order expiration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.component_type">
<span class="sig-name descname"><span class="pre">component_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Trade'</span></em><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.component_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.create_ask">
<span class="sig-name descname"><span class="pre">create_ask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_income</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.create_ask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.create_ask" title="Permalink to this definition"></a></dt>
<dd><p>Create a new ask for resource, with agent asking for min_income.</p>
<p>On a successful trade, income will be at least min_income, possibly more.</p>
<p>The agent places one unit of resource into escrow so that it may not be used
for something else while the order exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.create_bid">
<span class="sig-name descname"><span class="pre">create_bid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payment</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.create_bid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.create_bid" title="Permalink to this definition"></a></dt>
<dd><p>Create a new bid for resource, with agent offering max_payment.</p>
<p>On a successful trade, payment will be at most max_payment, possibly less.</p>
<p>The agent places the bid coin into escrow so that it may not be spent on
something else while the order exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Agents cannot submit bids/asks for resources where they are at the order
limit. In addition, they may only submit asks for resources they possess and
bids for which they can pay.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Here, agents and the planner both observe historical market behavior and
outstanding bids/asks for each tradable commodity. Agents only see the
outstanding bids/asks to which they could respond (that is, that they did not
submit). Agents also see their own outstanding bids/asks.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_dense_log">
<span class="sig-name descname"><span class="pre">get_dense_log</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.get_dense_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_dense_log" title="Permalink to this definition"></a></dt>
<dd><p>Log executed trades.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A list of trade events. Each entry corresponds to a single</dt><dd><p>timestep and contains a description of any trades that occurred on
that timestep.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>trades (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_metrics">
<span class="sig-name descname"><span class="pre">get_metrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.get_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Metrics that capture what happened through this component.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {“metric_name”: metric_value},</dt><dd><p>where metric_value is a scalar.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>metrics (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Adds 2*C action spaces [ (bid+ask) * n_commodities ], each with 1 + max_bid_ask
actions corresponding to price levels 0 to max_bid_ask.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.match_orders">
<span class="sig-name descname"><span class="pre">match_orders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.match_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.match_orders" title="Permalink to this definition"></a></dt>
<dd><p>This implements the continuous double auction by identifying valid bid/ask
pairs and executing trades accordingly.</p>
<p>Higher (lower) bids (asks) are given priority over lower (higher) bids (asks).
Trades are executed using the price of whichever bid/ask order was placed
first: bid price if bid was placed first, ask price otherwise.</p>
<p>Trading removes the payment and resource from bidder’s and asker’s escrow,
respectively, and puts them in the other’s inventory.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ContinuousDoubleAuction'</span></em><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.remove_expired_orders">
<span class="sig-name descname"><span class="pre">remove_expired_orders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/continuous_double_auction.html#ContinuousDoubleAuction.remove_expired_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.remove_expired_orders" title="Permalink to this definition"></a></dt>
<dd><p>Increment the time counter for any unfilled bids/asks and remove expired
orders from the market.</p>
<p>When orders expire, the payment or resource is removed from escrow and
returned to the inventory and the associated order is removed from the order
books.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.continuous_double_auction.ContinuousDoubleAuction.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Coin',</span> <span class="pre">'Labor']</span></em><a class="headerlink" href="#foundation.components.continuous_double_auction.ContinuousDoubleAuction.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-foundation.components.covid19_components">
<span id="foundation-components-covid19-components-module"></span><h2>foundation.components.covid19_components module<a class="headerlink" href="#module-foundation.components.covid19_components" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.covid19_components.</span></span><span class="sig-name descname"><span class="pre">ControlUSStateOpenCloseStatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_component_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_stringency_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_cooldown_period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">28</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_component_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Sets the open/close stringency levels for states.
:param n_stringency_levels: number of stringency levels the states can chose</p>
<blockquote>
<div><p>from. (Must match the number in the model constants dictionary referenced by
the parent scenario.)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action_cooldown_period</strong> (<em>int</em>) – action cooldown period in days.
Once a stringency level is set, the state(s) cannot switch to another level
for a certain number of days (referred to as the “action_cooldown_period”)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>Use this method to implement additional steps that the component should
perform at reset. Useful for resetting internal trackers.</p>
<p>This method should not return anything.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent']</span></em><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.component_step" title="Permalink to this definition"></a></dt>
<dd><p>For all relevant agents, execute the actions specific to this Component class.
This is essentially where the component logic is implemented and what allows
components to create environment dynamics.</p>
<p>If the component expects certain resources/landmarks/entities to be in play,
it must declare them in ‘required_entities’ so that they can be registered as
part of the world and, where appropriate, part of the agent inventory.</p>
<p>If the component expects non-standard fields to exist in agent.state for one
or more agent types, that must be reflected in get_additional_state_fields().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>Create action masks to indicate which actions are and are not valid. Actions
that are valid should be given a value of 1 and 0 otherwise. Do not generate
a mask for the NO-OP action, which is always available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>completions</strong> (<em>int</em>) – The number of completed episodes. This is intended to
be used in the case that actions may be masked or unmasked as part of a
learning curriculum.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {agent.idx: mask} with an entry for each</dt><dd><p>agent that can interact with this component. See below.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>masks (dict)</p>
</dd>
</dl>
<p>The expected output parallels the action subspaces defined by get_n_actions():
The output should be a dictionary of {agent.idx: mask} keyed for all agents
that take actions via this component.</p>
<p>For example, say the component defines a set of 4 actions for agents of type
“BasicMobileAgent” (self.get_n_actions(“BasicMobileAgent) –&gt; 4). Because all
action spaces include a NO-OP action, there are 5 available actions,
interpreted in this example as: NO-OP (index=0), moving up (index=1),
down (index=2), left (index=3), or right (index=4). Say also that agent-0 (the
agent with agent.idx=0) is prevented from moving left but can otherwise move.
In this case, generate_masks(world)[‘0’] should point to a length-4 binary
array, specifically [1, 1, 0, 1]. Note that the mask is length 4 while
technically 5 actions are available. This is because NO-OP should be ignored
when constructing masks.</p>
<p>In the more complex case where the component defines several action sets for
an agent, say the planner agent (the agent with agent.idx=’p’), then
generate_masks(world)[‘p’] should point to a dictionary of
{“action_set_name_m”: mask_m} for each of the M action sets associated with
agent p’s type. Each such value, mask_m, should be a binary array whose
length matches the number of actions in “action_set_name_m”.</p>
<p>The default behavior (below) keeps all actions available. The code gives an
example of expected formatting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>Generate observations associated with this Component class.</p>
<p>A component does not need to produce observations and can provide observations
for only some agent types; however, for a given environment, the structure of
the observations returned by this component should be identical between
subsequent calls to generate_observations. That is, the agents that receive
observations should remain consistent as should the structure of their
individual observations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {agent.idx: agent_obs_dict}. In words,</dt><dd><p>return a dictionary with an entry for each agent (which can include
the planner) for which this component provides an observation. For each
entry, the key specifies the index of the agent and the value contains
its associated observation dictionary.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>obs (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>Return a dictionary of {state_field: reset_val} managed by this Component
class for agents of type agent_cls_name. This also partially controls reset
behavior.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which additional states
are being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {“state_field”: reset_val} for</dt><dd><p>each extra state field that this component adds/manages to agents of
type agent_cls_name. This extra_state_dict is incorporated into
agent.state for each agent of this type. Note that the keyed fields
will be reset to reset_val when the environment is reset.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>extra_state_dict (dict)</p>
</dd>
</dl>
<p>If the component has its own internal state, the protocol for resetting that
should be written into the custom method ‘additional_reset_steps()’ [see below].</p>
<p>States that are meant to be internal to the component do not need to be
registered as agent state fields. Rather, adding to the agent state fields is
most useful when two or more components refer to or affect the same state. In
general, however, if the component expects a particular state field to exist,
it should use return that field (and its reset value) here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_data_dictionary">
<span class="sig-name descname"><span class="pre">get_data_dictionary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.get_data_dictionary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_data_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Create a dictionary of data to push to the GPU (device).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>Return the number of actions (not including NO-OPs) for agents of type
agent_cls_name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which number of actions
is being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>If the component does not add any</dt><dd><p>actions for agents of type agent_cls_name, return None. If it adds a
single action space, return an integer specifying the number of
actions in the action space. If it adds multiple action spaces,
return a list of tuples (“action_set_name”, num_actions_in_set).
See below for further detail.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>action_space (None, int, or list)</p>
</dd>
</dl>
<p>If agent_class_name type agents do not participate in the component, simply
return None</p>
<p>In the next simplest case, the component adds one set of n different actions
for agents of type agent_cls_name. In this case, return n (as an int). For
example, if Component implements moving up, down, left, or right for
“BasicMobileAgent” agents, then Component.get_n_actions(‘Mobile’) should
return 4.</p>
<p>If the component adds multiple sets of actions for a given agent type, this
method should return a list of tuples:</p>
<blockquote>
<div><p>[(“action_set_name_1”, n_1), …, (“action_set_name_M”, n_M)],
where M is the number of different sets of actions, and n_k is the number of
actions in action set k.</p>
</div></blockquote>
<p>For example, if Component allows agent ‘Planner’ to set some tax for each of
individual Mobile agents, and there are 3 such agents, then:</p>
<blockquote>
<div><p>Component.get_n_actions(‘Planner’) should return, i.e.,
[(‘Tax_0’, 10), (‘Tax_1’, 10), (‘Tax_2’, 10)],
where, in this example, the Planner agent can choose 10 different tax
levels for each Mobile agent.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_tensor_dictionary">
<span class="sig-name descname"><span class="pre">get_tensor_dictionary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#ControlUSStateOpenCloseStatus.get_tensor_dictionary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.get_tensor_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Create a dictionary of (Pytorch-accessible) data to push to the GPU (device).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ControlUSStateOpenCloseStatus'</span></em><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.ControlUSStateOpenCloseStatus.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#foundation.components.covid19_components.ControlUSStateOpenCloseStatus.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.covid19_components.</span></span><span class="sig-name descname"><span class="pre">FederalGovernmentSubsidy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_component_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsidy_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">90</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_subsidy_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_annual_subsidy_per_person</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20000</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_component_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subsidy_interval</strong> (<em>int</em>) – The number of days over which the total subsidy amount
is evenly rolled out.
Note: shortening the subsidy interval increases the total amount of money
that the planner could possibly spend. For instance, if the subsidy
interval is 30, the planner can create a subsidy every 30 days.</p></li>
<li><p><strong>num_subsidy_levels</strong> (<em>int</em>) – The number of subsidy levels.
Note: with max_annual_subsidy_per_person=10000, one round of subsidies at
the maximum subsidy level equals an expenditure of roughly $3.3 trillion
(given the US population of 330 million).
If the planner chooses the maximum subsidy amount, the $3.3 trillion
is rolled out gradually over the subsidy interval.</p></li>
<li><p><strong>max_annual_subsidy_per_person</strong> (<em>float</em>) – The maximum annual subsidy that may be
allocated per person.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>Use this method to implement additional steps that the component should
perform at reset. Useful for resetting internal trackers.</p>
<p>This method should not return anything.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicPlanner']</span></em><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.component_step" title="Permalink to this definition"></a></dt>
<dd><p>For all relevant agents, execute the actions specific to this Component class.
This is essentially where the component logic is implemented and what allows
components to create environment dynamics.</p>
<p>If the component expects certain resources/landmarks/entities to be in play,
it must declare them in ‘required_entities’ so that they can be registered as
part of the world and, where appropriate, part of the agent inventory.</p>
<p>If the component expects non-standard fields to exist in agent.state for one
or more agent types, that must be reflected in get_additional_state_fields().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>Create action masks to indicate which actions are and are not valid. Actions
that are valid should be given a value of 1 and 0 otherwise. Do not generate
a mask for the NO-OP action, which is always available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>completions</strong> (<em>int</em>) – The number of completed episodes. This is intended to
be used in the case that actions may be masked or unmasked as part of a
learning curriculum.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {agent.idx: mask} with an entry for each</dt><dd><p>agent that can interact with this component. See below.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>masks (dict)</p>
</dd>
</dl>
<p>The expected output parallels the action subspaces defined by get_n_actions():
The output should be a dictionary of {agent.idx: mask} keyed for all agents
that take actions via this component.</p>
<p>For example, say the component defines a set of 4 actions for agents of type
“BasicMobileAgent” (self.get_n_actions(“BasicMobileAgent) –&gt; 4). Because all
action spaces include a NO-OP action, there are 5 available actions,
interpreted in this example as: NO-OP (index=0), moving up (index=1),
down (index=2), left (index=3), or right (index=4). Say also that agent-0 (the
agent with agent.idx=0) is prevented from moving left but can otherwise move.
In this case, generate_masks(world)[‘0’] should point to a length-4 binary
array, specifically [1, 1, 0, 1]. Note that the mask is length 4 while
technically 5 actions are available. This is because NO-OP should be ignored
when constructing masks.</p>
<p>In the more complex case where the component defines several action sets for
an agent, say the planner agent (the agent with agent.idx=’p’), then
generate_masks(world)[‘p’] should point to a dictionary of
{“action_set_name_m”: mask_m} for each of the M action sets associated with
agent p’s type. Each such value, mask_m, should be a binary array whose
length matches the number of actions in “action_set_name_m”.</p>
<p>The default behavior (below) keeps all actions available. The code gives an
example of expected formatting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>Generate observations associated with this Component class.</p>
<p>A component does not need to produce observations and can provide observations
for only some agent types; however, for a given environment, the structure of
the observations returned by this component should be identical between
subsequent calls to generate_observations. That is, the agents that receive
observations should remain consistent as should the structure of their
individual observations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {agent.idx: agent_obs_dict}. In words,</dt><dd><p>return a dictionary with an entry for each agent (which can include
the planner) for which this component provides an observation. For each
entry, the key specifies the index of the agent and the value contains
its associated observation dictionary.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>obs (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>Return a dictionary of {state_field: reset_val} managed by this Component
class for agents of type agent_cls_name. This also partially controls reset
behavior.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which additional states
are being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {“state_field”: reset_val} for</dt><dd><p>each extra state field that this component adds/manages to agents of
type agent_cls_name. This extra_state_dict is incorporated into
agent.state for each agent of this type. Note that the keyed fields
will be reset to reset_val when the environment is reset.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>extra_state_dict (dict)</p>
</dd>
</dl>
<p>If the component has its own internal state, the protocol for resetting that
should be written into the custom method ‘additional_reset_steps()’ [see below].</p>
<p>States that are meant to be internal to the component do not need to be
registered as agent state fields. Rather, adding to the agent state fields is
most useful when two or more components refer to or affect the same state. In
general, however, if the component expects a particular state field to exist,
it should use return that field (and its reset value) here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.get_data_dictionary">
<span class="sig-name descname"><span class="pre">get_data_dictionary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.get_data_dictionary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.get_data_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Create a dictionary of data to push to the device</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>Return the number of actions (not including NO-OPs) for agents of type
agent_cls_name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which number of actions
is being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>If the component does not add any</dt><dd><p>actions for agents of type agent_cls_name, return None. If it adds a
single action space, return an integer specifying the number of
actions in the action space. If it adds multiple action spaces,
return a list of tuples (“action_set_name”, num_actions_in_set).
See below for further detail.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>action_space (None, int, or list)</p>
</dd>
</dl>
<p>If agent_class_name type agents do not participate in the component, simply
return None</p>
<p>In the next simplest case, the component adds one set of n different actions
for agents of type agent_cls_name. In this case, return n (as an int). For
example, if Component implements moving up, down, left, or right for
“BasicMobileAgent” agents, then Component.get_n_actions(‘Mobile’) should
return 4.</p>
<p>If the component adds multiple sets of actions for a given agent type, this
method should return a list of tuples:</p>
<blockquote>
<div><p>[(“action_set_name_1”, n_1), …, (“action_set_name_M”, n_M)],
where M is the number of different sets of actions, and n_k is the number of
actions in action set k.</p>
</div></blockquote>
<p>For example, if Component allows agent ‘Planner’ to set some tax for each of
individual Mobile agents, and there are 3 such agents, then:</p>
<blockquote>
<div><p>Component.get_n_actions(‘Planner’) should return, i.e.,
[(‘Tax_0’, 10), (‘Tax_1’, 10), (‘Tax_2’, 10)],
where, in this example, the Planner agent can choose 10 different tax
levels for each Mobile agent.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.get_tensor_dictionary">
<span class="sig-name descname"><span class="pre">get_tensor_dictionary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#FederalGovernmentSubsidy.get_tensor_dictionary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.get_tensor_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Create a dictionary of (Pytorch-accessible) data to push to the device</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'FederalGovernmentSubsidy'</span></em><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.FederalGovernmentSubsidy.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#foundation.components.covid19_components.FederalGovernmentSubsidy.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.covid19_components.</span></span><span class="sig-name descname"><span class="pre">VaccinationCampaign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_component_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daily_vaccines_per_million_people</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delivery_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vaccine_delivery_start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'2020-12-22'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observe_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_component_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Implements a (passive) component for delivering vaccines to agents once a certain
amount of time has elapsed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>daily_vaccines_per_million_people</strong> (<em>int</em>) – The number of vaccines available per
million people everyday.</p></li>
<li><p><strong>delivery_interval</strong> (<em>int</em>) – The number of days between vaccine deliveries.</p></li>
<li><p><strong>vaccine_delivery_start_date</strong> (<em>string</em>) – The date (YYYY-MM-DD) when the
vaccination begins.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>Use this method to implement additional steps that the component should
perform at reset. Useful for resetting internal trackers.</p>
<p>This method should not return anything.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent']</span></em><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.component_step" title="Permalink to this definition"></a></dt>
<dd><p>For all relevant agents, execute the actions specific to this Component class.
This is essentially where the component logic is implemented and what allows
components to create environment dynamics.</p>
<p>If the component expects certain resources/landmarks/entities to be in play,
it must declare them in ‘required_entities’ so that they can be registered as
part of the world and, where appropriate, part of the agent inventory.</p>
<p>If the component expects non-standard fields to exist in agent.state for one
or more agent types, that must be reflected in get_additional_state_fields().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>Create action masks to indicate which actions are and are not valid. Actions
that are valid should be given a value of 1 and 0 otherwise. Do not generate
a mask for the NO-OP action, which is always available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>completions</strong> (<em>int</em>) – The number of completed episodes. This is intended to
be used in the case that actions may be masked or unmasked as part of a
learning curriculum.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {agent.idx: mask} with an entry for each</dt><dd><p>agent that can interact with this component. See below.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>masks (dict)</p>
</dd>
</dl>
<p>The expected output parallels the action subspaces defined by get_n_actions():
The output should be a dictionary of {agent.idx: mask} keyed for all agents
that take actions via this component.</p>
<p>For example, say the component defines a set of 4 actions for agents of type
“BasicMobileAgent” (self.get_n_actions(“BasicMobileAgent) –&gt; 4). Because all
action spaces include a NO-OP action, there are 5 available actions,
interpreted in this example as: NO-OP (index=0), moving up (index=1),
down (index=2), left (index=3), or right (index=4). Say also that agent-0 (the
agent with agent.idx=0) is prevented from moving left but can otherwise move.
In this case, generate_masks(world)[‘0’] should point to a length-4 binary
array, specifically [1, 1, 0, 1]. Note that the mask is length 4 while
technically 5 actions are available. This is because NO-OP should be ignored
when constructing masks.</p>
<p>In the more complex case where the component defines several action sets for
an agent, say the planner agent (the agent with agent.idx=’p’), then
generate_masks(world)[‘p’] should point to a dictionary of
{“action_set_name_m”: mask_m} for each of the M action sets associated with
agent p’s type. Each such value, mask_m, should be a binary array whose
length matches the number of actions in “action_set_name_m”.</p>
<p>The default behavior (below) keeps all actions available. The code gives an
example of expected formatting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>Generate observations associated with this Component class.</p>
<p>A component does not need to produce observations and can provide observations
for only some agent types; however, for a given environment, the structure of
the observations returned by this component should be identical between
subsequent calls to generate_observations. That is, the agents that receive
observations should remain consistent as should the structure of their
individual observations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {agent.idx: agent_obs_dict}. In words,</dt><dd><p>return a dictionary with an entry for each agent (which can include
the planner) for which this component provides an observation. For each
entry, the key specifies the index of the agent and the value contains
its associated observation dictionary.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>obs (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>Return a dictionary of {state_field: reset_val} managed by this Component
class for agents of type agent_cls_name. This also partially controls reset
behavior.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which additional states
are being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {“state_field”: reset_val} for</dt><dd><p>each extra state field that this component adds/manages to agents of
type agent_cls_name. This extra_state_dict is incorporated into
agent.state for each agent of this type. Note that the keyed fields
will be reset to reset_val when the environment is reset.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>extra_state_dict (dict)</p>
</dd>
</dl>
<p>If the component has its own internal state, the protocol for resetting that
should be written into the custom method ‘additional_reset_steps()’ [see below].</p>
<p>States that are meant to be internal to the component do not need to be
registered as agent state fields. Rather, adding to the agent state fields is
most useful when two or more components refer to or affect the same state. In
general, however, if the component expects a particular state field to exist,
it should use return that field (and its reset value) here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.get_data_dictionary">
<span class="sig-name descname"><span class="pre">get_data_dictionary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.get_data_dictionary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.get_data_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Create a dictionary of data to push to the device</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>Return the number of actions (not including NO-OPs) for agents of type
agent_cls_name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which number of actions
is being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>If the component does not add any</dt><dd><p>actions for agents of type agent_cls_name, return None. If it adds a
single action space, return an integer specifying the number of
actions in the action space. If it adds multiple action spaces,
return a list of tuples (“action_set_name”, num_actions_in_set).
See below for further detail.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>action_space (None, int, or list)</p>
</dd>
</dl>
<p>If agent_class_name type agents do not participate in the component, simply
return None</p>
<p>In the next simplest case, the component adds one set of n different actions
for agents of type agent_cls_name. In this case, return n (as an int). For
example, if Component implements moving up, down, left, or right for
“BasicMobileAgent” agents, then Component.get_n_actions(‘Mobile’) should
return 4.</p>
<p>If the component adds multiple sets of actions for a given agent type, this
method should return a list of tuples:</p>
<blockquote>
<div><p>[(“action_set_name_1”, n_1), …, (“action_set_name_M”, n_M)],
where M is the number of different sets of actions, and n_k is the number of
actions in action set k.</p>
</div></blockquote>
<p>For example, if Component allows agent ‘Planner’ to set some tax for each of
individual Mobile agents, and there are 3 such agents, then:</p>
<blockquote>
<div><p>Component.get_n_actions(‘Planner’) should return, i.e.,
[(‘Tax_0’, 10), (‘Tax_1’, 10), (‘Tax_2’, 10)],
where, in this example, the Planner agent can choose 10 different tax
levels for each Mobile agent.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.get_tensor_dictionary">
<span class="sig-name descname"><span class="pre">get_tensor_dictionary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/covid19_components.html#VaccinationCampaign.get_tensor_dictionary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.get_tensor_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Create a dictionary of (Pytorch-accessible) data to push to the device</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'VaccinationCampaign'</span></em><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.num_vaccines_per_delivery">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_vaccines_per_delivery</span></span><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.num_vaccines_per_delivery" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="foundation.components.covid19_components.VaccinationCampaign.time_when_vaccine_delivery_begins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_when_vaccine_delivery_begins</span></span><a class="headerlink" href="#foundation.components.covid19_components.VaccinationCampaign.time_when_vaccine_delivery_begins" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-foundation.components.move">
<span id="foundation-components-move-module"></span><h2>foundation.components.move module<a class="headerlink" href="#module-foundation.components.move" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.move.Gather">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.move.</span></span><span class="sig-name descname"><span class="pre">Gather</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_component_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">move_labor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collect_labor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skill_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_component_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Allows mobile agents to move around the world and collect resources and prevents
agents from moving to invalid locations.</p>
<p>Can be configured to include collection skill, where agents have heterogeneous
probabilities of collecting bonus resources without additional labor cost.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>move_labor</strong> (<em>float</em>) – Labor cost associated with movement. Must be &gt;= 0.
Default is 1.0.</p></li>
<li><p><strong>collect_labor</strong> (<em>float</em>) – Labor cost associated with collecting resources. This
cost is added (in addition to any movement cost) when the agent lands on
a tile that is populated with resources (triggering collection).
Must be &gt;= 0. Default is 1.0.</p></li>
<li><p><strong>skill_dist</strong> (<em>str</em>) – Distribution type for sampling skills. Default (“none”)
gives all agents identical skill equal to a bonus prob of 0. “pareto” and
“lognormal” sample skills from the associated distributions.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.move.Gather.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Re-sample agents’ collection skills.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.move.Gather.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent']</span></em><a class="headerlink" href="#foundation.components.move.Gather.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.move.Gather.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather.component_step" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Move to adjacent, unoccupied locations. Collect resources when moving to
populated resource tiles, adding the resource to the agent’s inventory and
de-populating it from the tile.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.move.Gather.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Prevent moving to adjacent tiles that are already occupied (or outside the
boundaries of the world)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.move.Gather.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Here, agents observe their collection skill. The planner does not observe
anything from this component.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.move.Gather.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>For mobile agents, add state field for collection skill.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.move.Gather.get_dense_log">
<span class="sig-name descname"><span class="pre">get_dense_log</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather.get_dense_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather.get_dense_log" title="Permalink to this definition"></a></dt>
<dd><p>Log resource collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A list of gather events. Each entry corresponds to a single</dt><dd><p>timestep and contains a description of any resource gathers that
occurred on that timestep.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>gathers (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.move.Gather.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/move.html#Gather.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.move.Gather.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Adds 4 actions (move up, down, left, or right) for mobile agents.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.move.Gather.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Gather'</span></em><a class="headerlink" href="#foundation.components.move.Gather.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.move.Gather.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Coin',</span> <span class="pre">'House',</span> <span class="pre">'Labor']</span></em><a class="headerlink" href="#foundation.components.move.Gather.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="foundation.components.move.rand">
<span class="sig-prename descclassname"><span class="pre">foundation.components.move.</span></span><span class="sig-name descname"><span class="pre">rand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#foundation.components.move.rand" title="Permalink to this definition"></a></dt>
<dd><p>Random values in a given shape.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a convenience function for users porting code from Matlab,
and wraps <cite>random_sample</cite>. That function takes a
tuple to specify the size of the output, which is consistent with
other NumPy functions like <cite>numpy.zeros</cite> and <cite>numpy.ones</cite>.</p>
</div>
<p>Create an array of the given shape and populate it with
random samples from a uniform distribution
over <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d0</strong> (<em>int</em><em>, </em><em>optional</em>) – The dimensions of the returned array, must be non-negative.
If no argument is given a single Python float is returned.</p></li>
<li><p><strong>d1</strong> (<em>int</em><em>, </em><em>optional</em>) – The dimensions of the returned array, must be non-negative.
If no argument is given a single Python float is returned.</p></li>
<li><p><strong>...</strong> (<em>int</em><em>, </em><em>optional</em>) – The dimensions of the returned array, must be non-negative.
If no argument is given a single Python float is returned.</p></li>
<li><p><strong>dn</strong> (<em>int</em><em>, </em><em>optional</em>) – The dimensions of the returned array, must be non-negative.
If no argument is given a single Python float is returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Random values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray, shape <code class="docutils literal notranslate"><span class="pre">(d0,</span> <span class="pre">d1,</span> <span class="pre">...,</span> <span class="pre">dn)</span></code></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">random</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([[ 0.14022471,  0.96360618],  #random</span>
<span class="go">       [ 0.37601032,  0.25528411],  #random</span>
<span class="go">       [ 0.49313049,  0.94909878]]) #random</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-foundation.components.redistribution">
<span id="foundation-components-redistribution-module"></span><h2>foundation.components.redistribution module<a class="headerlink" href="#module-foundation.components.redistribution" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.redistribution.</span></span><span class="sig-name descname"><span class="pre">PeriodicBracketTax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_component_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disable_taxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tax_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'model_wrapper'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_disc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_brackets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_bracket_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usd_scaling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bracket_spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'us-federal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_bracket_rates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pareto_weight_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inverse_income'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">saez_fixed_elas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tax_annealing_schedule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_component_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Periodically collect income taxes from agents and do lump-sum redistribution.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If this component is used, it should always be the last component in the order!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>disable_taxes</strong> (<em>bool</em>) – Whether to disable any tax collection, effectively
enforcing that tax rates are always 0. Useful for removing taxes without
changing the observation space. Default is False (taxes enabled).</p></li>
<li><p><strong>tax_model</strong> (<em>str</em>) – Which tax model to use for setting taxes.
“model_wrapper” (default) uses the actions of the planner agent;
“saez” uses an adaptation of the theoretical optimal taxation formula
derived in <a class="reference external" href="https://www.nber.org/papers/w7628">https://www.nber.org/papers/w7628</a>.
“us-federal-single-filer-2018-scaled” uses US federal tax rates from 2018;
“fixed-bracket-rates” uses the rates supplied in fixed_bracket_rates.</p></li>
<li><p><strong>period</strong> (<em>int</em>) – Length of a tax period in environment timesteps. Taxes are
updated at the start of each period and collected/redistributed at the
end of each period. Must be &gt; 0. Default is 100 timesteps.</p></li>
<li><p><strong>rate_min</strong> (<em>float</em>) – Minimum tax rate within a bracket. Must be &gt;= 0 (default).</p></li>
<li><p><strong>rate_max</strong> (<em>float</em>) – Maximum tax rate within a bracket. Must be &lt;= 1 (default).</p></li>
<li><p><strong>rate_disc</strong> (<em>float</em>) – (Only applies for “model_wrapper”) the interval separating
discrete tax rates that the planner can select. Default of 0.05 means,
for example, the planner can select among [0.0, 0.05, 0.10, … 1.0].
Must be &gt; 0 and &lt; 1.</p></li>
<li><p><strong>n_brackets</strong> (<em>int</em>) – How many tax brackets to use. Must be &gt;=2. Default is 5.</p></li>
<li><p><strong>top_bracket_cutoff</strong> (<em>float</em>) – The income at the left end of the last tax
bracket. Must be &gt;= 10. Default is 100 coin.</p></li>
<li><p><strong>usd_scaling</strong> (<em>float</em>) – Scale by which to divide the US Federal bracket cutoffs
when using bracket_spacing = “us-federal”. Must be &gt; 0. Default is 1000.</p></li>
<li><p><strong>bracket_spacing</strong> (<em>str</em>) – <p>How bracket cutoffs should be spaced.
“us-federal” (default) uses scaled cutoffs from the 2018 US Federal</p>
<blockquote>
<div><p>taxes, with scaling set by usd_scaling (ignores n_brackets and
top_bracket_cutoff);</p>
</div></blockquote>
<dl class="simple">
<dt>”linear” linearly spaces the n_bracket cutoffs between 0 and</dt><dd><p>top_bracket_cutoff;</p>
</dd>
</dl>
<p>”log” is similar to “linear” but with logarithmic spacing.</p>
</p></li>
<li><p><strong>fixed_bracket_rates</strong> (<em>list</em>) – Required if tax_model==”fixed-bracket-rates”. A
list of fixed marginal rates to use for each bracket. Length must be
equal to the number of brackets (7 for “us-federal” spacing, n_brackets
otherwise).</p></li>
<li><p><strong>pareto_weight_type</strong> (<em>str</em>) – Type of Pareto weights to use when computing tax
rates using the Saez formula. “inverse_income” (default) uses 1/z;
“uniform” uses 1.</p></li>
<li><p><strong>saez_fixed_elas</strong> (<em>float</em><em>, </em><em>optional</em>) – If supplied, this value will be used as
the elasticity estimate when computing tax rates using the Saez formula.
If not given (default), elasticity will be estimated empirically.</p></li>
<li><p><strong>tax_annealing_schedule</strong> (<em>list</em><em>, </em><em>optional</em>) – A length-2 list of
[tax_annealing_warmup, tax_annealing_slope] describing the tax annealing
schedule. See annealed_tax_mask function for details. Default behavior is
no tax annealing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Reset trackers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent',</span> <span class="pre">'BasicPlanner']</span></em><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.bracketize_schedule">
<span class="sig-name descname"><span class="pre">bracketize_schedule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bin_marginal_rates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_sizes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.bracketize_schedule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.bracketize_schedule" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.component_step" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>On the first day of each tax period, update taxes. On the last day, enact them.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.component_type">
<span class="sig-name descname"><span class="pre">component_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PeriodicTax'</span></em><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.component_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.compute_and_set_new_period_rates_from_saez_formula">
<span class="sig-name descname"><span class="pre">compute_and_set_new_period_rates_from_saez_formula</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update_elas_tm1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_log_z0_tm1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.compute_and_set_new_period_rates_from_saez_formula"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.compute_and_set_new_period_rates_from_saez_formula" title="Permalink to this definition"></a></dt>
<dd><p>Estimates/sets optimal rates using adaptation of Saez formula</p>
<p>See: <a class="reference external" href="https://www.nber.org/papers/w7628">https://www.nber.org/papers/w7628</a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.curr_marginal_rates">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">curr_marginal_rates</span></span><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.curr_marginal_rates" title="Permalink to this definition"></a></dt>
<dd><p>The current set of marginal tax bracket rates.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.curr_rate_max">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">curr_rate_max</span></span><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.curr_rate_max" title="Permalink to this definition"></a></dt>
<dd><p>Maximum allowable tax rate, given current progress of any tax annealing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.enact_taxes">
<span class="sig-name descname"><span class="pre">enact_taxes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.enact_taxes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.enact_taxes" title="Permalink to this definition"></a></dt>
<dd><p>Calculate period income &amp; tax burden. Collect taxes and redistribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.estimate_uniform_income_elasticity">
<span class="sig-name descname"><span class="pre">estimate_uniform_income_elasticity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">observed_incomes_and_marginal_rates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elas_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.98</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elas_tm1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_z0_tm1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.estimate_uniform_income_elasticity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.estimate_uniform_income_elasticity" title="Permalink to this definition"></a></dt>
<dd><p>Estimate elasticity using Ordinary Least Squares regression.
OLS: <a class="reference external" href="https://en.wikipedia.org/wiki/Ordinary_least_squares">https://en.wikipedia.org/wiki/Ordinary_least_squares</a>
Estimating elasticity: <a class="reference external" href="https://www.nber.org/papers/w7512">https://www.nber.org/papers/w7512</a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.fixed_bracket_rates">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fixed_bracket_rates</span></span><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.fixed_bracket_rates" title="Permalink to this definition"></a></dt>
<dd><p>Return whatever fixed bracket rates were set during initialization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Masks only apply to the planner and if tax_model == “model_wrapper” and taxes
are enabled.
All tax actions are masked (so, only NO-OPs can be sampled) on all timesteps
except when self.tax_cycle_pos==1 (meaning a new tax period is starting).
When self.tax_cycle_pos==1, tax actions are masked in order to enforce any
tax annealing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Agents observe where in the tax period cycle they are, information about the
last period’s incomes, and the current marginal tax rates, including the
marginal rate that will apply to their next unit of income.</p>
<p>The planner observes the same type of information, but for all the agents. It
also sees, for each agent, their marginal tax rate and reported income from
the previous tax period.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>This component does not add any agent state fields.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.get_binned_saez_welfare_weight_and_pareto_params">
<span class="sig-name descname"><span class="pre">get_binned_saez_welfare_weight_and_pareto_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">population_incomes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.get_binned_saez_welfare_weight_and_pareto_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.get_binned_saez_welfare_weight_and_pareto_params" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.get_dense_log">
<span class="sig-name descname"><span class="pre">get_dense_log</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.get_dense_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.get_dense_log" title="Permalink to this definition"></a></dt>
<dd><p>Log taxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A list of tax collections. Each entry corresponds to a single</dt><dd><p>timestep. Entries are empty except for timesteps where a tax period
ended and taxes were collected. For those timesteps, each entry
contains the tax schedule, each agent’s reported income, tax paid,
and redistribution received.
Returns None if taxes are disabled.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>taxes (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.get_local_saez_buffer">
<span class="sig-name descname"><span class="pre">get_local_saez_buffer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.get_local_saez_buffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.get_local_saez_buffer" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.get_metrics">
<span class="sig-name descname"><span class="pre">get_metrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.get_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.get_metrics" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Return metrics related to bracket rates, bracket occupancy, and tax collection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>If using the “model_wrapper” tax model and taxes are enabled, the planner’s
action space includes an action subspace for each of the tax brackets. Each
such action space has as many actions as there are discretized tax rates.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.get_saez_marginal_rates">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_saez_marginal_rates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">binned_gz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned_az</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elas</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.get_saez_marginal_rates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.get_saez_marginal_rates" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.income_bin">
<span class="sig-name descname"><span class="pre">income_bin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">income</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.income_bin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.income_bin" title="Permalink to this definition"></a></dt>
<dd><p>Return index of tax bin in which income falls.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.marginal_rate">
<span class="sig-name descname"><span class="pre">marginal_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">income</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.marginal_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.marginal_rate" title="Permalink to this definition"></a></dt>
<dd><p>Return the marginal tax rate applied at this income level.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PeriodicBracketTax'</span></em><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Coin']</span></em><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.reset_saez_buffers">
<span class="sig-name descname"><span class="pre">reset_saez_buffers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.reset_saez_buffers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.reset_saez_buffers" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.saez_buffer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">saez_buffer</span></span><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.saez_buffer" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.set_global_saez_buffer">
<span class="sig-name descname"><span class="pre">set_global_saez_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_saez_buffer</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.set_global_saez_buffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.set_global_saez_buffer" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.set_new_period_rates_model">
<span class="sig-name descname"><span class="pre">set_new_period_rates_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.set_new_period_rates_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.set_new_period_rates_model" title="Permalink to this definition"></a></dt>
<dd><p>Update taxes using actions from the tax model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.taxes_due">
<span class="sig-name descname"><span class="pre">taxes_due</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">income</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#PeriodicBracketTax.taxes_due"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.taxes_due" title="Permalink to this definition"></a></dt>
<dd><p>Return the total amount of taxes due at this income level.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="foundation.components.redistribution.PeriodicBracketTax.us_federal_single_filer_2018_scaled">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">us_federal_single_filer_2018_scaled</span></span><a class="headerlink" href="#foundation.components.redistribution.PeriodicBracketTax.us_federal_single_filer_2018_scaled" title="Permalink to this definition"></a></dt>
<dd><p>//turbotax.intuit.com/tax-tips/irs-tax-return/current-federal-tax-rate-schedules/L7Bjs1EAD
If taxable income is over—
but not over—
the tax is:
$0
$9,700
10% of the amount over $0
$9,700
$39,475
$970 plus 12% of the amount over $9,700
$39,475
$84,200
$4,543 plus 22% of the amount over $39,475
$84,200
$160,725
$14,382 plus 24% of the amount over $84,200
$160,725
$204,100
$32,748 plus 32% of the amount over $160,725
$204,100
$510,300
$46,628 plus 35% of the amount over $204,100
$510,300
no limit
$153,798 plus 37% of the amount over $510,300</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>https</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.redistribution.</span></span><span class="sig-name descname"><span class="pre">WealthRedistribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">world</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">episode_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inventory_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#WealthRedistribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Redistributes the total coin of the mobile agents as evenly as possible.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If this component is used, it should always be the last component in the order!</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent']</span></em><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#WealthRedistribution.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.component_step" title="Permalink to this definition"></a></dt>
<dd><p>See base_component.py for detailed description.</p>
<p>Redistributes inventory coins so that all agents have equal coin endowment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#WealthRedistribution.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>Passive component. Masks are empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#WealthRedistribution.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>This component does not add any observations.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#WealthRedistribution.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>This component does not add any state fields.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/redistribution.html#WealthRedistribution.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>This component is passive: it does not add any actions.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'WealthRedistribution'</span></em><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.redistribution.WealthRedistribution.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Coin']</span></em><a class="headerlink" href="#foundation.components.redistribution.WealthRedistribution.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-foundation.components.simple_labor">
<span id="foundation-components-simple-labor-module"></span><h2>foundation.components.simple_labor module<a class="headerlink" href="#module-foundation.components.simple_labor" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">foundation.components.simple_labor.</span></span><span class="sig-name descname"><span class="pre">SimpleLabor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">base_component_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_first_step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_max_skill_multiplier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pareto_param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4.0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">base_component_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/simple_labor.html#SimpleLabor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ai_economist.foundation.base.base_component.BaseComponent</span></code></p>
<p>Allows Agents to select a level of labor, which earns income based on skill.</p>
<p>Labor is “simple” because this simplifies labor to a choice along a 1D axis. More
concretely, this component adds 100 labor actions, each representing a choice of
how many hours to work, e.g. action 50 represents doing 50 hours of work; each
Agent earns income proportional to the product of its labor amount (representing
hours worked) and its skill (representing wage), with higher skill and higher labor
yielding higher income.</p>
<p>This component is intended to be used with the ‘PeriodicBracketTax’ component and
the ‘one-step-economy’ scenario.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask_first_step</strong> (<em>bool</em>) – Defaults to True. If True, masks all non-0 labor
actions on the first step of the environment. When combined with the
intended component/scenario, the first env step is used to set taxes
(via the ‘redistribution’ component) and the second step is used to
select labor (via this component).</p></li>
<li><p><strong>payment_max_skill_multiplier</strong> (<em>float</em>) – When determining the skill level of
each Agent, sampled skills are clipped to this maximum value.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.additional_reset_steps">
<span class="sig-name descname"><span class="pre">additional_reset_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/simple_labor.html#SimpleLabor.additional_reset_steps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.additional_reset_steps" title="Permalink to this definition"></a></dt>
<dd><p>Use this method to implement additional steps that the component should
perform at reset. Useful for resetting internal trackers.</p>
<p>This method should not return anything.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.agent_subclasses">
<span class="sig-name descname"><span class="pre">agent_subclasses</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['BasicMobileAgent']</span></em><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.agent_subclasses" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.component_step">
<span class="sig-name descname"><span class="pre">component_step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/simple_labor.html#SimpleLabor.component_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.component_step" title="Permalink to this definition"></a></dt>
<dd><p>For all relevant agents, execute the actions specific to this Component class.
This is essentially where the component logic is implemented and what allows
components to create environment dynamics.</p>
<p>If the component expects certain resources/landmarks/entities to be in play,
it must declare them in ‘required_entities’ so that they can be registered as
part of the world and, where appropriate, part of the agent inventory.</p>
<p>If the component expects non-standard fields to exist in agent.state for one
or more agent types, that must be reflected in get_additional_state_fields().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.generate_masks">
<span class="sig-name descname"><span class="pre">generate_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/simple_labor.html#SimpleLabor.generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.generate_masks" title="Permalink to this definition"></a></dt>
<dd><p>Create action masks to indicate which actions are and are not valid. Actions
that are valid should be given a value of 1 and 0 otherwise. Do not generate
a mask for the NO-OP action, which is always available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>completions</strong> (<em>int</em>) – The number of completed episodes. This is intended to
be used in the case that actions may be masked or unmasked as part of a
learning curriculum.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {agent.idx: mask} with an entry for each</dt><dd><p>agent that can interact with this component. See below.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>masks (dict)</p>
</dd>
</dl>
<p>The expected output parallels the action subspaces defined by get_n_actions():
The output should be a dictionary of {agent.idx: mask} keyed for all agents
that take actions via this component.</p>
<p>For example, say the component defines a set of 4 actions for agents of type
“BasicMobileAgent” (self.get_n_actions(“BasicMobileAgent) –&gt; 4). Because all
action spaces include a NO-OP action, there are 5 available actions,
interpreted in this example as: NO-OP (index=0), moving up (index=1),
down (index=2), left (index=3), or right (index=4). Say also that agent-0 (the
agent with agent.idx=0) is prevented from moving left but can otherwise move.
In this case, generate_masks(world)[‘0’] should point to a length-4 binary
array, specifically [1, 1, 0, 1]. Note that the mask is length 4 while
technically 5 actions are available. This is because NO-OP should be ignored
when constructing masks.</p>
<p>In the more complex case where the component defines several action sets for
an agent, say the planner agent (the agent with agent.idx=’p’), then
generate_masks(world)[‘p’] should point to a dictionary of
{“action_set_name_m”: mask_m} for each of the M action sets associated with
agent p’s type. Each such value, mask_m, should be a binary array whose
length matches the number of actions in “action_set_name_m”.</p>
<p>The default behavior (below) keeps all actions available. The code gives an
example of expected formatting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.generate_observations">
<span class="sig-name descname"><span class="pre">generate_observations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/simple_labor.html#SimpleLabor.generate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.generate_observations" title="Permalink to this definition"></a></dt>
<dd><p>Generate observations associated with this Component class.</p>
<p>A component does not need to produce observations and can provide observations
for only some agent types; however, for a given environment, the structure of
the observations returned by this component should be identical between
subsequent calls to generate_observations. That is, the agents that receive
observations should remain consistent as should the structure of their
individual observations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary of {agent.idx: agent_obs_dict}. In words,</dt><dd><p>return a dictionary with an entry for each agent (which can include
the planner) for which this component provides an observation. For each
entry, the key specifies the index of the agent and the value contains
its associated observation dictionary.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>obs (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.get_additional_state_fields">
<span class="sig-name descname"><span class="pre">get_additional_state_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/simple_labor.html#SimpleLabor.get_additional_state_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.get_additional_state_fields" title="Permalink to this definition"></a></dt>
<dd><p>Return a dictionary of {state_field: reset_val} managed by this Component
class for agents of type agent_cls_name. This also partially controls reset
behavior.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which additional states
are being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A dictionary of {“state_field”: reset_val} for</dt><dd><p>each extra state field that this component adds/manages to agents of
type agent_cls_name. This extra_state_dict is incorporated into
agent.state for each agent of this type. Note that the keyed fields
will be reset to reset_val when the environment is reset.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>extra_state_dict (dict)</p>
</dd>
</dl>
<p>If the component has its own internal state, the protocol for resetting that
should be written into the custom method ‘additional_reset_steps()’ [see below].</p>
<p>States that are meant to be internal to the component do not need to be
registered as agent state fields. Rather, adding to the agent state fields is
most useful when two or more components refer to or affect the same state. In
general, however, if the component expects a particular state field to exist,
it should use return that field (and its reset value) here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.get_n_actions">
<span class="sig-name descname"><span class="pre">get_n_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_cls_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/simple_labor.html#SimpleLabor.get_n_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.get_n_actions" title="Permalink to this definition"></a></dt>
<dd><p>Return the number of actions (not including NO-OPs) for agents of type
agent_cls_name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_cls_name</strong> (<em>str</em>) – name of the Agent class for which number of actions
is being queried. For example, “BasicMobileAgent”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>If the component does not add any</dt><dd><p>actions for agents of type agent_cls_name, return None. If it adds a
single action space, return an integer specifying the number of
actions in the action space. If it adds multiple action spaces,
return a list of tuples (“action_set_name”, num_actions_in_set).
See below for further detail.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>action_space (None, int, or list)</p>
</dd>
</dl>
<p>If agent_class_name type agents do not participate in the component, simply
return None</p>
<p>In the next simplest case, the component adds one set of n different actions
for agents of type agent_cls_name. In this case, return n (as an int). For
example, if Component implements moving up, down, left, or right for
“BasicMobileAgent” agents, then Component.get_n_actions(‘Mobile’) should
return 4.</p>
<p>If the component adds multiple sets of actions for a given agent type, this
method should return a list of tuples:</p>
<blockquote>
<div><p>[(“action_set_name_1”, n_1), …, (“action_set_name_M”, n_M)],
where M is the number of different sets of actions, and n_k is the number of
actions in action set k.</p>
</div></blockquote>
<p>For example, if Component allows agent ‘Planner’ to set some tax for each of
individual Mobile agents, and there are 3 such agents, then:</p>
<blockquote>
<div><p>Component.get_n_actions(‘Planner’) should return, i.e.,
[(‘Tax_0’, 10), (‘Tax_1’, 10), (‘Tax_2’, 10)],
where, in this example, the Planner agent can choose 10 different tax
levels for each Mobile agent.</p>
</div></blockquote>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SimpleLabor'</span></em><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="foundation.components.simple_labor.SimpleLabor.required_entities">
<span class="sig-name descname"><span class="pre">required_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Coin']</span></em><a class="headerlink" href="#foundation.components.simple_labor.SimpleLabor.required_entities" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-foundation.components.utils">
<span id="foundation-components-utils-module"></span><h2>foundation.components.utils module<a class="headerlink" href="#module-foundation.components.utils" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="foundation.components.utils.annealed_tax_limit">
<span class="sig-prename descclassname"><span class="pre">foundation.components.utils.</span></span><span class="sig-name descname"><span class="pre">annealed_tax_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warmup_period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_max_tax_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/utils.html#annealed_tax_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.utils.annealed_tax_limit" title="Permalink to this definition"></a></dt>
<dd><p>Compute the maximum tax rate available at this stage of tax annealing.</p>
<p>This function uses the number of episode completions and the annealing schedule
(warmup_period, slope, &amp; final_max_tax_value) to determine what the maximum tax
rate can be.
This type of annealing allows for a tax curriculum where earlier episodes are
restricted to lower tax rates. As more episodes are played, higher tax values are
allowed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>completions</strong> (<em>int</em>) – Number of times the environment has completed an episode.
Expected to be &gt;= 0.</p></li>
<li><p><strong>warmup_period</strong> (<em>int</em>) – Until warmup_period completions, only allow 0 tax. Using
a negative value will enable non-0 taxes at 0 environment completions.</p></li>
<li><p><strong>slope</strong> (<em>float</em>) – After warmup_period completions, percentage of full tax value
unmasked with each new completion.</p></li>
<li><p><strong>final_max_tax_value</strong> (<em>float</em>) – The maximum tax value at the end of annealing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A scalar value indicating the maximum tax at this stage of annealing.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>&gt;&gt; WARMUP = 100
&gt;&gt; SLOPE = 0.01
&gt;&gt; annealed_tax_limit(0, WARMUP, SLOPE)
0.0
&gt;&gt; annealed_tax_limit(100, WARMUP, SLOPE)
0.0
&gt;&gt; annealed_tax_limit(150, WARMUP, SLOPE)
0.5
&gt;&gt; annealed_tax_limit(200, WARMUP, SLOPE)
1.0
&gt;&gt; annealed_tax_limit(1000, WARMUP, SLOPE)
1.0</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="foundation.components.utils.annealed_tax_mask">
<span class="sig-prename descclassname"><span class="pre">foundation.components.utils.</span></span><span class="sig-name descname"><span class="pre">annealed_tax_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warmup_period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tax_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/foundation/components/utils.html#annealed_tax_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#foundation.components.utils.annealed_tax_mask" title="Permalink to this definition"></a></dt>
<dd><p>Generate a mask applied to a set of tax values for the purpose of tax annealing.</p>
<p>This function uses the number of episode completions and the annealing schedule
to determine which of the tax values are considered valid. The most extreme
tax/subsidy values are unmasked last. Zero tax is always unmasked (i.e. always
valid).
This type of annealing allows for a tax curriculum where earlier episodes are
restricted to lower tax rates. As more episodes are played, higher tax values are
allowed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>completions</strong> (<em>int</em>) – Number of times the environment has completed an episode.
Expected to be &gt;= 0.</p></li>
<li><p><strong>warmup_period</strong> (<em>int</em>) – Until warmup_period completions, only allow 0 tax. Using
a negative value will enable non-0 taxes at 0 environment completions.</p></li>
<li><p><strong>slope</strong> (<em>float</em>) – After warmup_period completions, percentage of full tax value
unmasked with each new completion.</p></li>
<li><p><strong>tax_values</strong> (<em>list</em>) – The list of tax values associated with each action to
which this mask will apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A binary mask with same shape as tax_values, indicating which tax values are</dt><dd><p>currently valid.</p>
</dd>
</dl>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>&gt;&gt; WARMUP = 100
&gt;&gt; SLOPE = 0.01
&gt;&gt; TAX_VALUES = [0.0, 0.25, 0.50, 0.75, 1.0]
&gt;&gt; annealed_tax_limit(0, WARMUP, SLOPE, TAX_VALUES)
[0, 0, 0, 0, 0]
&gt;&gt; annealed_tax_limit(100, WARMUP, SLOPE, TAX_VALUES)
[0, 0, 0, 0, 0]
&gt;&gt; annealed_tax_limit(150, WARMUP, SLOPE, TAX_VALUES)
[1, 1, 1, 0, 0]
&gt;&gt; annealed_tax_limit(200, WARMUP, SLOPE, TAX_VALUES)
[1, 1, 1, 1, 1]
&gt;&gt; annealed_tax_limit(1000, WARMUP, SLOPE, TAX_VALUES)
[1, 1, 1, 1, 1]</p>
</dd></dl>

</section>
<section id="module-foundation.components">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-foundation.components" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="foundation.base.html" class="btn btn-neutral float-left" title="foundation.base package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="foundation.entities.html" class="btn btn-neutral float-right" title="foundation.entities package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, a.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>